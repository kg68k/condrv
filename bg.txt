
　Console driver v1.09c+09 よりバックグラウンドでバックスクロール画面を
操作する機能が搭載されました.

　従来はバックスクロール画面を表示するとそれまで実行していたプログラムは
停止してしまいますが、この機能を使うとバックスクロール画面を操作しながら
プログラムの実行も続けるということが可能になります(キー入力は全てバック
スクロール画面の操作になります).


・使用法

1. CONFIG.SYS で process を設定する.
2. CONFIG.SYS で condrv(em).sys を組み込む.
3. xcont.r を -z オプションで常駐させる.

例)
process	= 4 2 50
device	= sys\condrvem.sys -b128k16jf1m3xp -oc -nbce
program	= bin\xcont -z

　これでバックスクロールにしてもそれまで実行されていたプログラムが停止し
なくなります(xcont を常駐させなければ従来通りの動作になります).

　なお、xcont が常駐すると condrvd という名称のバックグラウンドプロセス
が登録され、一定時間ごとに IOCS _B_KEYSNS を発行するようになります.


・注意

　若干キー入力の反応が鈍く、カーソル移動がガクガクします. 気になるようで
したら、xcont の -z オプションの引数や CONFIG.SYS の process の値を調節
してみて下さい.

BG 動作中のコンソール出力に追従してバックスクロール画面を更新するように
していますが、完全なものではありません. おかしいと思ったら C-l(em 版の場
合)で画面を再描画して下さい.


・動作原理

　キー入力がなければ、バックスクロール画面を表示したまま戻ります. これは
C-undo とほぼ同じです.

ただし、そのままだと次回のキーセンスまで時間がかかってしまうので、xcont
でバックグラウンドプロセスを登録し、そのスレッドから IOCS _B_KEYSNS を呼
び出しています.

　IOCS _B_KEYSNS 及び _B_KEYINP では、前回表示したまま戻った場合は、表示
を省略し、いきなりキー入力を行います. これの繰り返しです.


# 　condrv(em).sys のワークを直接書き換えれば xcont の常駐なしに BG 動作
# モードになりますが、キーセンスが時々しか行われないので非常にストレスの
# 溜まる反応になってしまいます(^^;


・備考

　68030 + 68882、バックグラウンドプロセス動作中という環境で浮動小数点命
令を使用するプログラムを実行すると、コプロセッサプロトコルバイオレーショ
ン例外が発生することがあります. condrv(em).sys + xcont.r という組み合せ
でなくても起きるようなので何ら対策は施していません. 運悪くそのような状況
になってしまったら BG 動作を諦めて下さい.


[EOF]
